<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My LBD app</title>
</head>
<body>
    <!-- Adding all the necessary dependencies for developing our app -->
    <script src="https://unpkg.com/jsonld@8.2.0/dist/jsonld.min.js"></script>
    <script type="importmap">
        {
          "imports": {
            "web-ifc": "https://unpkg.com/web-ifc@0.0.41/web-ifc-api.js",
            "ifc-lbd": "https://unpkg.com/ifc-lbd@0.3.7/dist/index.js",
            "async-oxigraph": "https://unpkg.com/async-oxigraph@0.0.5/dist/index.js",
            "jsonld": "https://unpkg.com/jsonld@8.2.0/dist/jsonld.esm.js",
            "rxjs": "https://unpkg.com/rxjs@7.5.4/dist/esm/index.js",
            "tslib": "https://unpkg.com/tslib@2.3.1/tslib.es6.js"
          }
        }
    </script>

    <script type="module">
        import { LBDParser, ParserSettings } from "ifc-lbd";
        import { IfcAPI } from "web-ifc";
        import { AsyncOxigraph } from "async-oxigraph";

        // Init web-ifc and Oxigraph
        const ifcAPI = new IfcAPI();
        const asyncOxigraph = new AsyncOxigraph("./assets/oxigraph/worker.js");
        initWebIFCAndOxigraph();

        async function initWebIFCAndOxigraph(){
            ifcAPI.SetWasmPath("./assets/");
            await Promise.all([
                asyncOxigraph.init(),
                ifcAPI.Init()
            ]);
            console.log("web-ifc and Oxigraph Ready");
        }

    </script>

</body>
</html>